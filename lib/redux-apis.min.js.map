{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///redux-apis.min.js","webpack:///webpack/bootstrap 92f2791ce1e947bc22f1","webpack:///C:/ws/redux-apis/src/redux-apis.jsx"],"names":["root","factory","exports","module","define","amd","a","i","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_typeof","obj","Symbol","constructor","_toConsumableArray","arr","Array","isArray","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","link","parent","child","arguments","undefined","apiLink","__parent","Api","__link","bind","onload","fn","Component","load","components","params","Promise","all","filter","component","map","result","parentState","childState","childName","name","names","Object","keys","_createAction","type","actionCreator","metaCreator","finalActionCreator","t","action","payload","apply","Error","error","meta","_extends","assign","target","source","key","prototype","hasOwnProperty","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","value","_this","state","__actionHandlers","__state","__dispatch","dispatch","getState","reducer","connector","createAction","actionType","payloadCreator","handler","ownProps","api","_this2","idx","indexOf","subAction","substring","subs","forEach","sub","act","subResult","concat"],"mappings":"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","file":"redux-apis.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.link = link;\n\texports.onload = onload;\n\texports.load = load;\n\t\n\tfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Api = exports.Api = (function () {\n\t\tfunction Api() {\n\t\t\tvar _this = this;\n\t\n\t\t\tvar state = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t\t\t_classCallCheck(this, Api);\n\t\n\t\t\tObject.defineProperties(this, {\n\t\t\t\t__actionHandlers: { value: {} },\n\t\t\t\t__state: { value: state, writable: true },\n\t\t\t\t__dispatch: { value: function value(action) {\n\t\t\t\t\t\tif (typeof action == 'function') {\n\t\t\t\t\t\t\treturn action(_this.dispatch.bind(_this), _this.getState.bind(_this));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstate = _this.reducer(state, action);\n\t\t\t\t\t\treturn action;\n\t\t\t\t\t} },\n\t\t\t\t__parent: { value: undefined, writable: true },\n\t\t\t\t__link: { value: undefined, writable: true },\n\t\t\t\tconnector: { value: this.connector.bind(this) },\n\t\t\t\treducer: { value: this.reducer.bind(this) }\n\t\t\t});\n\t\t}\n\t\n\t\t_createClass(Api, [{\n\t\t\tkey: 'init',\n\t\t\tvalue: function init() {\n\t\t\t\tthis.dispatch(this.createAction('@@redux/INIT')());\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'dispatch',\n\t\t\tvalue: function dispatch(action) {\n\t\t\t\treturn this.__parent ? this.__parent.dispatch(action) : this.__dispatch(action);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getState',\n\t\t\tvalue: function getState() {\n\t\t\t\treturn this.__parent ? this.__link ? this.__link(this.__parent.getState()) : this.__parent.getState() : this.__state;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'createAction',\n\t\t\tvalue: function createAction(actionType, payloadCreator, metaCreator) {\n\t\t\t\treturn this.__parent instanceof Api ? this.__parent.createAction(childName(this.__parent, this) + '/' + actionType, payloadCreator, metaCreator) : _createAction(actionType, payloadCreator, metaCreator);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setHandler',\n\t\t\tvalue: function setHandler(actionType, handler) {\n\t\t\t\tthis.__actionHandlers[actionType] = handler;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'clearHandler',\n\t\t\tvalue: function clearHandler(actionType) {\n\t\t\t\tdelete this.__actionHandlers[actionType];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'connector',\n\t\t\tvalue: function connector(state, ownProps) {\n\t\t\t\treturn _extends({}, this.getState(), ownProps, { api: this });\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'reducer',\n\t\t\tvalue: function reducer(state, action) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar idx = action.type.indexOf('/');\n\t\t\t\tvar subAction = idx !== -1 && action.type.substring(0, idx);\n\t\t\t\tvar result = this.__actionHandlers[action.type] ? this.__actionHandlers[action.type].call(this, state, action) : state === undefined ? this.__state : undefined;\n\t\t\t\tvar subs = Object.keys(this).filter(function (key) {\n\t\t\t\t\treturn _this2[key] instanceof Api;\n\t\t\t\t});\n\t\t\t\tsubs.forEach(function (sub) {\n\t\t\t\t\tvar act = sub !== subAction ? action : _extends({}, action, { type: action.type.substring(idx + 1) });\n\t\t\t\t\tvar subResult = _this2[sub].reducer(_this2[sub].__link(state), act);\n\t\t\t\t\tif (state === undefined || _this2[sub].__link && _this2[sub].__link(state) === undefined || _this2[sub].getState() !== subResult) {\n\t\t\t\t\t\tif (result === undefined) {\n\t\t\t\t\t\t\tresult = state instanceof Array ? [].concat(_toConsumableArray(state)) : _extends({}, state);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this2[sub].__link(result, subResult);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn this.__state = result || state;\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Api;\n\t})();\n\t\n\texports.default = Api;\n\tfunction link(parent, child) {\n\t\tvar link = arguments.length <= 2 || arguments[2] === undefined ? apiLink : arguments[2];\n\t\n\t\tchild.__parent = parent;\n\t\tif (parent instanceof Api) child.__link = link.bind(child);\n\t\treturn child;\n\t}\n\t\n\tfunction onload(fn) {\n\t\treturn function (Component) {\n\t\t\tComponent.onload = fn;return Component;\n\t\t};\n\t}\n\t\n\tfunction load(components, params) {\n\t\treturn Promise.all(components.filter(function (component) {\n\t\t\treturn component.onload;\n\t\t}).map(function (component) {\n\t\t\treturn component.onload(params);\n\t\t}).filter(function (result) {\n\t\t\treturn result instanceof Promise;\n\t\t}));\n\t}\n\t\n\tfunction apiLink(parentState, childState) {\n\t\treturn childState === undefined ? (typeof parentState === 'undefined' ? 'undefined' : _typeof(parentState)) == 'object' && this.__parent ? parentState[childName(this.__parent, this)] : parentState : (typeof parentState === 'undefined' ? 'undefined' : _typeof(parentState)) == 'object' && this.__parent ? parentState[childName(this.__parent, this)] = childState : childState;\n\t}\n\t\n\tfunction childName(parent, child) {\n\t\tvar names = Object.keys(parent);\n\t\tfor (var i = 0, name; name = names[i]; i++) {\n\t\t\tif (parent[name] === child) return name;\n\t\t}\n\t}\n\t\n\t// stolen from https://github.com/acdlite/redux-actions/blob/v0.9.0/src/createAction.js\n\tfunction _createAction(type, actionCreator, metaCreator) {\n\t\tvar finalActionCreator = typeof actionCreator === 'function' ? actionCreator : function (t) {\n\t\t\treturn t;\n\t\t};\n\t\treturn function () {\n\t\t\tvar action = { type: type, payload: finalActionCreator.apply(undefined, arguments) };\n\t\t\tif (arguments.length === 1 && arguments[0] instanceof Error) {\n\t\t\t\taction.error = true;\n\t\t\t}\n\t\t\tif (typeof metaCreator === 'function') {\n\t\t\t\taction.meta = metaCreator.apply(undefined, arguments);\n\t\t\t}\n\t\t\treturn action;\n\t\t};\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** redux-apis.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 92f2791ce1e947bc22f1\n **/","export class Api {\r\n\tconstructor(state = {}) {\r\n\t\tObject.defineProperties(this, {\r\n\t\t\t__actionHandlers: { value: {} },\r\n\t\t\t__state: { value:state, writable:true },\r\n\t\t\t__dispatch: { value: (action) => {\r\n\t\t\t\tif (typeof action == 'function') {return action(this.dispatch.bind(this), this.getState.bind(this));}\r\n\t\t\t\tstate = this.reducer(state, action);\r\n\t\t\t\treturn action;\r\n\t\t\t}},\r\n\t\t\t__parent: { value: undefined, writable: true },\r\n\t\t\t__link: { value: undefined, writable: true },\r\n\t\t\tconnector: { value: this.connector.bind(this) },\r\n\t\t\treducer: { value: this.reducer.bind(this) },\r\n\t\t});\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.dispatch(this.createAction('@@redux/INIT')());\r\n\t\treturn this;\r\n\t}\r\n\r\n\tdispatch(action) {\r\n\t\treturn this.__parent ? this.__parent.dispatch(action) : this.__dispatch(action);\r\n\t}\r\n\r\n\tgetState() {\r\n\t\treturn this.__parent\r\n\t\t\t? (this.__link ? this.__link(this.__parent.getState()) : this.__parent.getState())\r\n\t\t\t: this.__state;\r\n\t}\r\n\r\n\tcreateAction(actionType, payloadCreator, metaCreator) {\r\n\t\treturn this.__parent instanceof Api\r\n\t\t\t\t? this.__parent.createAction(childName(this.__parent, this) + '/' + actionType, payloadCreator, metaCreator)\r\n\t\t\t\t: createAction(actionType, payloadCreator, metaCreator);\r\n\t}\r\n\r\n\tsetHandler(actionType, handler) {\r\n\t\tthis.__actionHandlers[actionType] = handler;\r\n\t}\r\n\r\n\tclearHandler(actionType) {\r\n\t\tdelete this.__actionHandlers[actionType];\r\n\t}\r\n\r\n\tconnector(state, ownProps) {\r\n\t\treturn { ...this.getState(), ...ownProps, api:this };\r\n\t}\r\n\r\n\treducer(state, action) {\r\n\t\tconst idx = action.type.indexOf('/');\r\n\t\tconst subAction = idx !== -1 && action.type.substring(0, idx);\r\n\t\tlet result = this.__actionHandlers[action.type]\r\n\t\t\t? this.__actionHandlers[action.type].call(this, state, action)\r\n\t\t\t: (state === undefined ? this.__state : undefined);\r\n\t\tconst subs = Object.keys(this).filter(key => this[key] instanceof Api);\r\n\t\tsubs.forEach(sub => {\r\n\t\t\tconst act = sub !== subAction ? action : {...action, type:action.type.substring(idx + 1)};\r\n\t\t\tconst subResult = this[sub].reducer(this[sub].__link(state), act);\r\n\t\t\tif (state === undefined || this[sub].__link && this[sub].__link(state) === undefined || this[sub].getState() !== subResult) {\r\n\t\t\t\tif (result === undefined) {\r\n\t\t\t\t\tresult = state instanceof Array\r\n\t\t\t\t\t\t? [ ...state ]\r\n\t\t\t\t\t\t: { ...state };\r\n\t\t\t\t}\r\n\t\t\t\tthis[sub].__link(result, subResult);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this.__state = result || state;\r\n\t}\r\n}\r\nexport default Api;\r\n\r\nexport function link(parent, child, link = apiLink) {\r\n\tchild.__parent = parent;\r\n\tif (parent instanceof Api) child.__link = link.bind(child);\r\n\treturn child;\r\n}\r\n\r\nexport function onload(fn) {\r\n\treturn Component => {Component.onload = fn;\treturn Component;};\r\n}\r\n\r\nexport function load(components, params) {\r\n\treturn Promise.all(components\r\n\t\t.filter(component => component.onload)\r\n\t\t.map(component => component.onload(params))\r\n\t\t.filter(result => result instanceof Promise));\r\n}\r\n\r\nfunction apiLink(parentState, childState) {\r\n\treturn childState === undefined\r\n\t\t? (typeof parentState == 'object' && this.__parent\r\n\t\t\t? parentState[childName(this.__parent, this)]\r\n\t\t\t: parentState)\r\n\t\t: (typeof parentState == 'object' && this.__parent\r\n\t\t\t? parentState[childName(this.__parent, this)] = childState\r\n\t\t\t: childState)\r\n}\r\n\r\nfunction childName(parent, child) {\r\n\tlet names = Object.keys(parent);\r\n\tfor (let i=0,name; name=names[i]; i++) {\r\n\t\tif (parent[name] === child) return name;\r\n\t}\r\n}\r\n\r\n// stolen from https://github.com/acdlite/redux-actions/blob/v0.9.0/src/createAction.js\r\nfunction createAction(type, actionCreator, metaCreator) {\r\n  const finalActionCreator = typeof actionCreator === 'function' ? actionCreator : (t) => t;\r\n  return (...args) => {\r\n    const action = {type, payload:finalActionCreator(...args)};\r\n    if (args.length === 1 && args[0] instanceof Error) {action.error = true;}\r\n    if (typeof metaCreator === 'function') {action.meta = metaCreator(...args);}\r\n    return action;\r\n  };\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/ws/redux-apis/src/redux-apis.jsx\n **/"],"sourceRoot":""}