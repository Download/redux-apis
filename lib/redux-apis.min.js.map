{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///redux-apis.min.js","webpack:///webpack/bootstrap ff7d4e1420db8bfcd93d","webpack:///./redux-apis.jsx"],"names":["root","factory","exports","module","define","amd","a","i","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_toConsumableArray","arr","Array","isArray","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","link","parent","child","arguments","undefined","apiLink","__parent","__link","bind","parentState","childState","n","name","Object","assign","_extends","namedLink","_name","getParent","names","keys","_createAction","type","actionCreator","metaCreator","finalActionCreator","t","action","payload","apply","Error","error","meta","target","source","key","prototype","hasOwnProperty","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","value","Api","_this","state","__actionHandlers","__state","__dispatch","dispatch","getState","reducer","connector","createAction","actionType","handler","result","payloadCreator","_this2","idx","indexOf","subAction","substring","subs","filter","forEach","sub","act","subResult","concat","ownProps","api"],"mappings":"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","file":"redux-apis.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.link = link;\n\texports.apiLink = apiLink;\n\texports.namedLink = namedLink;\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Api = exports.Api = function () {\n\t\tfunction Api() {\n\t\t\tvar _this = this;\n\t\n\t\t\tvar state = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t\t\t_classCallCheck(this, Api);\n\t\n\t\t\tObject.defineProperties(this, {\n\t\t\t\t__actionHandlers: { value: {} },\n\t\t\t\t__state: { value: state, writable: true },\n\t\t\t\t__dispatch: { value: function value(action) {\n\t\t\t\t\t\tif (typeof action == 'function') {\n\t\t\t\t\t\t\treturn action(_this.dispatch.bind(_this), _this.getState.bind(_this));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstate = _this.reducer(state, action);\n\t\t\t\t\t\treturn action;\n\t\t\t\t\t} },\n\t\t\t\t__parent: { value: undefined, writable: true },\n\t\t\t\t__link: { value: undefined, writable: true },\n\t\t\t\tconnector: { value: this.connector.bind(this) },\n\t\t\t\treducer: { value: this.reducer.bind(this) }\n\t\t\t});\n\t\t}\n\t\n\t\t_createClass(Api, [{\n\t\t\tkey: 'init',\n\t\t\tvalue: function init() {\n\t\t\t\tthis.dispatch(this.createAction('@@redux/INIT')());\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getState',\n\t\t\tvalue: function getState() {\n\t\t\t\treturn this.getParent() ? this.__link ? this.__link(this.getParent().getState()) : this.getParent().getState() : this.__state;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getParent',\n\t\t\tvalue: function getParent() {\n\t\t\t\treturn this.__parent;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setHandler',\n\t\t\tvalue: function setHandler(actionType, handler) {\n\t\t\t\tthis.__actionHandlers[actionType] = handler;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getHandler',\n\t\t\tvalue: function getHandler(actionType) {\n\t\t\t\treturn this.__actionHandlers[actionType];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'clearHandler',\n\t\t\tvalue: function clearHandler(actionType) {\n\t\t\t\tvar result = this.__actionHandlers[actionType];\n\t\t\t\tdelete this.__actionHandlers[actionType];\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'createAction',\n\t\t\tvalue: function createAction(actionType, payloadCreator, metaCreator) {\n\t\t\t\treturn this.getParent() instanceof Api ? this.getParent().createAction(name(this) + '/' + actionType, payloadCreator, metaCreator) : _createAction(actionType, payloadCreator, metaCreator);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'dispatch',\n\t\t\tvalue: function dispatch(action) {\n\t\t\t\treturn this.__parent ? this.__parent.dispatch(action) : this.__dispatch(action);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'reducer',\n\t\t\tvalue: function reducer(state, action) {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar idx = action.type.indexOf('/');\n\t\t\t\tvar subAction = idx !== -1 && action.type.substring(0, idx);\n\t\t\t\tvar result = this.__actionHandlers[action.type] ? this.__actionHandlers[action.type].call(this, state, action) : state === undefined ? this.__state : undefined;\n\t\t\t\tvar subs = Object.keys(this).filter(function (key) {\n\t\t\t\t\treturn _this2[key] instanceof Api;\n\t\t\t\t});\n\t\t\t\tsubs.forEach(function (sub) {\n\t\t\t\t\tvar act = sub !== subAction ? action : _extends({}, action, { type: action.type.substring(idx + 1) });\n\t\t\t\t\tvar subResult = _this2[sub].reducer(_this2[sub].__link(state), act);\n\t\t\t\t\tif (state === undefined || _this2[sub].__link && _this2[sub].__link(state) === undefined || _this2[sub].getState() !== subResult) {\n\t\t\t\t\t\tif (result === undefined) {\n\t\t\t\t\t\t\tresult = state instanceof Array ? [].concat(_toConsumableArray(state)) : _extends({}, state);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this2[sub].__link(result, subResult);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn this.__state = result || state;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'connector',\n\t\t\tvalue: function connector(state, ownProps) {\n\t\t\t\treturn _extends({}, ownProps, this.getState(), { api: this });\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Api;\n\t}();\n\t\n\texports.default = Api;\n\tfunction link(parent, child) {\n\t\tvar link = arguments.length <= 2 || arguments[2] === undefined ? apiLink : arguments[2];\n\t\n\t\tchild.__parent = parent;\n\t\tchild.__link = link.bind(child);\n\t\treturn child;\n\t}\n\t\n\tfunction apiLink(parentState, childState) {\n\t\tvar n = name(this);\n\t\treturn childState === undefined ? parentState !== undefined && n ? parentState[n] : parentState : n ? parentState[n] = childState : Object.assign(parentState, _extends({}, childState));\n\t}\n\t\n\tfunction namedLink(name) {\n\t\treturn function (parentState, childState) {\n\t\t\treturn childState === undefined ? parentState !== undefined ? parentState[name] : undefined : parentState[name] = childState;\n\t\t};\n\t}\n\t\n\tfunction name(child) {\n\t\tvar parent = child.getParent();\n\t\tvar names = parent ? Object.keys(parent) : [];\n\t\tfor (var i = 0, _name; _name = names[i]; i++) {\n\t\t\tif (parent[_name] === child) return _name;\n\t\t}\n\t}\n\t\n\t// stolen from https://github.com/acdlite/redux-actions/blob/v0.9.0/src/createAction.js\n\tfunction _createAction(type, actionCreator, metaCreator) {\n\t\tvar finalActionCreator = typeof actionCreator === 'function' ? actionCreator : function (t) {\n\t\t\treturn t;\n\t\t};\n\t\treturn function () {\n\t\t\tvar action = { type: type, payload: finalActionCreator.apply(undefined, arguments) };\n\t\t\tif (arguments.length === 1 && (arguments.length <= 0 ? undefined : arguments[0]) instanceof Error) {\n\t\t\t\taction.error = true;\n\t\t\t}\n\t\t\tif (typeof metaCreator === 'function') {\n\t\t\t\taction.meta = metaCreator.apply(undefined, arguments);\n\t\t\t}\n\t\t\treturn action;\n\t\t};\n\t}\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** redux-apis.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ff7d4e1420db8bfcd93d\n **/","export class Api {\r\n\tconstructor(state = {}) {\r\n\t\tObject.defineProperties(this, {\r\n\t\t\t__actionHandlers: { value: {} },\r\n\t\t\t__state: { value:state, writable:true },\r\n\t\t\t__dispatch: { value: (action) => {\r\n\t\t\t\tif (typeof action == 'function') {return action(this.dispatch.bind(this), this.getState.bind(this));}\r\n\t\t\t\tstate = this.reducer(state, action);\r\n\t\t\t\treturn action;\r\n\t\t\t}},\r\n\t\t\t__parent: { value: undefined, writable: true },\r\n\t\t\t__link: { value: undefined, writable: true },\r\n\t\t\tconnector: { value: this.connector.bind(this) },\r\n\t\t\treducer: { value: this.reducer.bind(this) },\r\n\t\t});\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.dispatch(this.createAction('@@redux/INIT')());\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetState() {\r\n\t\treturn this.getParent()\r\n\t\t\t? (this.__link ? this.__link(this.getParent().getState()) : this.getParent().getState())\r\n\t\t\t: this.__state;\r\n\t}\r\n\r\n\tgetParent() {\r\n\t\treturn this.__parent;\r\n\t}\r\n\r\n\tsetHandler(actionType, handler) {\r\n\t\tthis.__actionHandlers[actionType] = handler;\r\n\t}\r\n\r\n\tgetHandler(actionType) {\r\n\t\treturn this.__actionHandlers[actionType];\r\n\t}\r\n\r\n\tclearHandler(actionType) {\r\n\t\tconst result = this.__actionHandlers[actionType];\r\n\t\tdelete this.__actionHandlers[actionType];\r\n\t\treturn result;\r\n\t}\r\n\r\n\tcreateAction(actionType, payloadCreator, metaCreator) {\r\n\t\treturn this.getParent() instanceof Api\r\n\t\t\t\t? this.getParent().createAction(name(this) + '/' + actionType, payloadCreator, metaCreator)\r\n\t\t\t\t: createAction(actionType, payloadCreator, metaCreator);\r\n\t}\r\n\r\n\tdispatch(action) {\r\n\t\treturn this.__parent ? this.__parent.dispatch(action) : this.__dispatch(action);\r\n\t}\r\n\r\n\treducer(state, action) {\r\n\t\tconst idx = action.type.indexOf('/');\r\n\t\tconst subAction = idx !== -1 && action.type.substring(0, idx);\r\n\t\tlet result = this.__actionHandlers[action.type]\r\n\t\t\t? this.__actionHandlers[action.type].call(this, state, action)\r\n\t\t\t: (state === undefined ? this.__state : undefined);\r\n\t\tconst subs = Object.keys(this).filter(key => this[key] instanceof Api);\r\n\t\tsubs.forEach(sub => {\r\n\t\t\tconst act = sub !== subAction ? action : {...action, type:action.type.substring(idx + 1)};\r\n\t\t\tconst subResult = this[sub].reducer(this[sub].__link(state), act);\r\n\t\t\tif (state === undefined || this[sub].__link && this[sub].__link(state) === undefined || this[sub].getState() !== subResult) {\r\n\t\t\t\tif (result === undefined) {\r\n\t\t\t\t\tresult = state instanceof Array\r\n\t\t\t\t\t\t? [ ...state ]\r\n\t\t\t\t\t\t: { ...state };\r\n\t\t\t\t}\r\n\t\t\t\tthis[sub].__link(result, subResult);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this.__state = result || state;\r\n\t}\r\n\r\n\tconnector(state, ownProps) {\r\n\t\treturn { ...ownProps, ...this.getState(), api:this };\r\n\t}\r\n}\r\nexport default Api;\r\n\r\nexport function link(parent, child, link = apiLink) {\r\n\tchild.__parent = parent;\r\n\tchild.__link = link.bind(child);\r\n\treturn child;\r\n}\r\n\r\nexport function apiLink(parentState, childState) {\r\n\tconst n = name(this);\r\n\treturn childState === undefined\r\n\t\t\t? (parentState !== undefined && n ? parentState[n] : parentState)\r\n\t\t\t: (n ? parentState[n] = childState : Object.assign(parentState, {...childState}));\r\n}\r\n\r\nexport function namedLink(name) {\r\n\treturn (parentState, childState) => childState === undefined\r\n\t\t\t? (parentState !== undefined ? parentState[name] : undefined)\r\n\t\t\t: parentState[name] = childState;\r\n}\r\n\r\nfunction name(child) {\r\n\tconst parent = child.getParent();\r\n\tlet names = parent ? Object.keys(parent) : [];\r\n\tfor (let i=0,name; name=names[i]; i++) {\r\n\t\tif (parent[name] === child) return name;\r\n\t}\r\n}\r\n\r\n// stolen from https://github.com/acdlite/redux-actions/blob/v0.9.0/src/createAction.js\r\nfunction createAction(type, actionCreator, metaCreator) {\r\n  const finalActionCreator = typeof actionCreator === 'function' ? actionCreator : (t) => t;\r\n  return (...args) => {\r\n    const action = {type, payload:finalActionCreator(...args)};\r\n    if (args.length === 1 && args[0] instanceof Error) {action.error = true;}\r\n    if (typeof metaCreator === 'function') {action.meta = metaCreator(...args);}\r\n    return action;\r\n  };\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./redux-apis.jsx\n **/"],"sourceRoot":""}