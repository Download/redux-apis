{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a9bed84fb933ebc7b9c4","webpack:///C:/ws/redux-apis/src/redux-apis.jsx"],"names":[],"mappings":"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","file":"redux-apis.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a9bed84fb933ebc7b9c4\n **/","export class Api {\r\n\tconstructor(state = {}) {\r\n\t\tObject.defineProperties(this, {\r\n\t\t\t__actionHandlers: { value: {} },\r\n\t\t\t__state: { value:state, writable:true },\r\n\t\t\t__dispatch: { value: (action) => {\r\n\t\t\t\tif (typeof action == 'function') {return action(this.dispatch.bind(this), this.getState.bind(this));}\r\n\t\t\t\tstate = this.reducer(state, action);\r\n\t\t\t\treturn action;\r\n\t\t\t}},\r\n\t\t\t__parent: { value: undefined, writable: true },\r\n\t\t\t__link: { value: undefined, writable: true },\r\n\t\t\tconnector: { value: this.connector.bind(this) },\r\n\t\t\treducer: { value: this.reducer.bind(this) },\r\n\t\t});\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.dispatch(this.createAction('@@redux/INIT')());\r\n\t\treturn this;\r\n\t}\r\n\r\n\tdispatch(action) {\r\n\t\treturn this.__parent ? this.__parent.dispatch(action) : this.__dispatch(action);\r\n\t}\r\n\r\n\tgetState() {\r\n\t\treturn this.__parent\r\n\t\t\t? (this.__link ? this.__link(this.__parent.getState()) : this.__parent.getState())\r\n\t\t\t: this.__state;\r\n\t}\r\n\r\n\tcreateAction(actionType, payloadCreator, metaCreator) {\r\n\t\treturn this.__parent instanceof Api\r\n\t\t\t\t? this.__parent.createAction(childName(this.__parent, this) + '/' + actionType, payloadCreator, metaCreator)\r\n\t\t\t\t: createAction(actionType, payloadCreator, metaCreator);\r\n\t}\r\n\r\n\tsetHandler(actionType, handler) {\r\n\t\tthis.__actionHandlers[actionType] = handler;\r\n\t}\r\n\r\n\tclearHandler(actionType) {\r\n\t\tdelete this.__actionHandlers[actionType];\r\n\t}\r\n\r\n\tconnector(state, ownProps) {\r\n\t\treturn { ...this.getState(), ...ownProps, api:this };\r\n\t}\r\n\r\n\treducer(state, action) {\r\n\t\tconst idx = action.type.indexOf('/');\r\n\t\tconst subAction = idx !== -1 && action.type.substring(0, idx);\r\n\t\tlet result = this.__actionHandlers[action.type]\r\n\t\t\t? this.__actionHandlers[action.type].call(this, state, action)\r\n\t\t\t: (state === undefined ? this.__state : undefined);\r\n\t\tconst subs = Object.keys(this).filter(key => this[key] instanceof Api);\r\n\t\tsubs.forEach(sub => {\r\n\t\t\tconst act = sub !== subAction ? action : {...action, type:action.type.substring(idx + 1)};\r\n\t\t\tconst subResult = this[sub].reducer(this[sub].__link(state), act);\r\n\t\t\tif (state === undefined || this[sub].__link && this[sub].__link(state) === undefined || this[sub].getState() !== subResult) {\r\n\t\t\t\tif (result === undefined) {\r\n\t\t\t\t\tresult = state instanceof Array\r\n\t\t\t\t\t\t? [ ...state ]\r\n\t\t\t\t\t\t: { ...state };\r\n\t\t\t\t}\r\n\t\t\t\tthis[sub].__link(result, subResult);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this.__state = result || state;\r\n\t}\r\n}\r\nexport default Api;\r\n\r\nexport function link(parent, child, link = apiLink) {\r\n\tchild.__parent = parent;\r\n\tif (parent instanceof Api) child.__link = link.bind(child);\r\n\treturn child;\r\n}\r\n\r\nexport function onload(fn) {\r\n\treturn Component => {Component.onload = fn;\treturn Component;};\r\n}\r\n\r\nexport function load(components, params) {\r\n\treturn Promise.all(components\r\n\t\t.filter(component => component.onload)\r\n\t\t.map(component => component.onload(params))\r\n\t\t.filter(result => result instanceof Promise));\r\n}\r\n\r\nfunction apiLink(parentState, childState) {\r\n\treturn childState === undefined\r\n\t\t? (typeof parentState == 'object' && this.__parent\r\n\t\t\t? parentState[childName(this.__parent, this)]\r\n\t\t\t: parentState)\r\n\t\t: (typeof parentState == 'object' && this.__parent\r\n\t\t\t? parentState[childName(this.__parent, this)] = childState\r\n\t\t\t: childState)\r\n}\r\n\r\nfunction childName(parent, child) {\r\n\tlet names = Object.keys(parent);\r\n\tfor (let i=0,name; name=names[i]; i++) {\r\n\t\tif (parent[name] === child) return name;\r\n\t}\r\n}\r\n\r\n// stolen from https://github.com/acdlite/redux-actions/blob/v0.9.0/src/createAction.js\r\nfunction createAction(type, actionCreator, metaCreator) {\r\n  const finalActionCreator = typeof actionCreator === 'function' ? actionCreator : (t) => t;\r\n  return (...args) => {\r\n    const action = {type, payload:finalActionCreator(...args)};\r\n    if (args.length === 1 && args[0] instanceof Error) {action.error = true;}\r\n    if (typeof metaCreator === 'function') {action.meta = metaCreator(...args);}\r\n    return action;\r\n  };\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/ws/redux-apis/src/redux-apis.jsx\n **/"],"sourceRoot":""}